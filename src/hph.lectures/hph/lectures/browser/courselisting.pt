<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
         metal:use-macro="context/main_template/macros/master"
         i18n:domain="hph.lectures">
<body>

<metal:main fill-slot="main">
    <metal:content-core define-macro="main">

        <tal:can_edit tal:condition="view/can_edit">
            <div class="app-callout app-callout-warning">
                <h4 i18n:translate="">Note:</h4>
                <p i18n:translate="">
                    It appears that you are logged in as staff member. Use the
                    link <em>XHR integrations</em> to open an overview of
                    code snippets that can be used to integrate 3rd party project
                    course listings via ajax
                </p>
                <a class="btn btn-warning pull-right"
                         tal:attributes="href string:${context/absolute_url}/@@xhr-integration"
                         i18n:translate="">
                    Show integration options</a>
            </div>
            <div class="app-callout app-callout--default" tal:condition="view/has_active_session" hidden>
                <pre tal:content="view/stored_filters"></pre>
            </div>
        </tal:can_edit>

        <div class="app-page__header">
            <h1 class="app-page__title">${context/Title}</h1>
        </div>

        <hr>

        <div class="app-page__body">
            <section class="app-page__section course-filter" tal:condition="context/is_current_semester">
                <div class="app-list__filter-bar filter-bar">
                    <span tal:replace="structure python:view.rendered_course_filter_bar(context)" />
                </div>
                <div class="app-list__result" tal:condition="view/has_active_session"
                         tal:define="active_filters view/active_filters">
                    <div class="app-list__result-count">
                        <strong>${view/result_count} Eintr채ge f체r</strong>
                        <span tal:condition="view/active_type_filter">Veranstaltungstyp: ${view/active_type_filter} &ndash;</span>
                        <span tal:condition="view/active_course_filter">Studiengang: ${view/active_course_filter}</span>
                        <span tal:condition="view/active_course_module_filter">&ndash; Modul: ${view/active_course_module_filter}</span>
                        <span tal:condition="view/active_course_theme_filter">&ndash; Schwerpunkt: ${view/active_course_theme_filter}</span>
                    </div>
                    <a class="app-btn app-btn--link"
                             tal:attributes="href string:${context/absolute_url}/@@course-filter-storage-cleanup">
                        <i class="ion ion-ios-close-circle-outline pp-icon pp-icon-sm"></i>
                        <span tal:omit-tag="" i18n:translate="">Filter zur체cksetzen</span>
                    </a>
                </div>
            </section>

            <section class="app-page__section app-list" id="content-core"
                     tal:define="Batch python:modules['Products.CMFPlone'].Batch;
                            b_size python:int(request.get('b_size', 20));
                                    b_start python:int(request.get('b_start', 0));
                                            results view/results;
                                                    batch python:Batch(results, b_size, b_start);">
                <article class="app-list__item" tal:repeat="item results">
                    <div class="app-list__item-details" tal:define="item_uuid item/UID">
                        <span tal:replace="structure python:view.rendered_course_card(item_uuid)" />
                    </div>
                </article>
                <tal:block tal:content="nothing">
                    <div metal:use-macro="context/batch_macros/macros/navigation" />
                </tal:block>
            </section>
        </div>

        <div class="app-section hiddenStructure" hidden>
            <div class="app-section__aside">
                <div class="app-card app-card--lectures">
                    <div class="app-card__header">
                        <div class="app-card__heading" i18n:translate="">
                            Veranstaltungstyp
                        </div>
                    </div>
                    <div class="app-card__main app-card__main--bordered">
                        <ul class="app-nav-list">
                            <tal:block tal:repeat="filter view/filter_options">
                                <li tal:define="filter_value filter/value"
                                         tal:attributes="class python:view.computed_class(filter_value)">
                                    <a class="app-nav-list-link"
                                             tal:attributes="href string:${context/absolute_url}?content_filter=1&amp;courseType=${filter/value}"
                                             tal:content="filter/title">Filter option</a>
                                </li>
                            </tal:block>
                        </ul>
                    </div>
                    <div class="app-card__footer">
                        <a class="btn btn-danger btn-sm"
                                 tal:attributes="href string:${context/absolute_url}">
                            &times; <span i18n:translate="">remove filter</span></a>
                    </div>
                </div>
                <div class="app-card app-card--nav app-card--lectures"
                         tal:condition="view/has_archives">
                    <div class="app-card__header">
                        <div class="app-card__heading" i18n:translate="">Archiv</div>
                    </div>
                    <div class="app-card__main app-card__main--bordered">
                        <ul class="app-nav-list">
                            <tal:block tal:repeat="folder view/contained_course_folders">
                                <li class="app-nav-list-item" tal:define="filter_active python:view.is_current_view_context(folder)">
                                    <a class="app-nav-list-link"
                                             tal:attributes="href folder/getURL"
                                             tal:content="folder/Title">Archive folder</a>
                                </li>
                            </tal:block>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="app-section__main">

                <div class="app-page__body">
                    <section class="app-page__section course-filter" tal:condition="context/is_current_semester" hidden>
                            <div class="app-list__filter-bar filter-bar">
                                <span tal:replace="structure python:view.rendered_course_filter_bar(context)" />
                            </div>
                            <div class="app-list__result-count">${view/result_count} Eintr채ge</div>
                    </section>

                    <section class="app-page__section app-list" id="content-core"
                        tal:define="Batch python:modules['Products.CMFPlone'].Batch;
                                    b_size python:int(request.get('b_size', 20));
                                    b_start python:int(request.get('b_start', 0));
                                    results view/results;
                                    batch python:Batch(results, b_size, b_start);">
                        <article class="app-list__item" tal:repeat="item results">
                            <div class="app-list__item-details" tal:define="item_uuid item/UID">
                                <span tal:replace="structure python:view.rendered_course_card(item_uuid)" />
                            </div>
                        </article>
                        <tal:block tal:content="nothing">
                            <div metal:use-macro="context/batch_macros/macros/navigation" />
                        </tal:block>
                    </section>
                </div>

            </div>
        </div>

    </metal:content-core>
</metal:main>
</body>
</html>