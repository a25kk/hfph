<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
         metal:use-macro="context/main_template/macros/master"
         i18n:domain="hph.lectures">
<body>

<metal:main fill-slot="main">
    <metal:content-core define-macro="main">

        <tal:can_edit tal:condition="view/can_edit">
            <div class="app-callout app-callout-warning">
                <h4 i18n:translate="">Note:</h4>
                <p i18n:translate="">
                    It appears that you are logged in as staff member. Use the
                    link <em>XHR integrations</em> to open an overview of
                    code snippets that can be used to integrate 3rd party project
                    course listings via ajax
                </p>
                <a class="btn btn-warning pull-right"
                         tal:attributes="href string:${context/absolute_url}/@@xhr-integration"
                         i18n:translate="">
                    Show integration options</a>
            </div>
        </tal:can_edit>

        <div class="app-section">
            <div class="app-section__aside">
                <div class="app-card app-card--lectures">
                    <div class="app-card__header">
                        <h4 class="app-card__title" i18n:translate="">
                            Veranstaltungstyp
                        </h4>
                    </div>
                    <div class="app-card__main app-card__main--bordered">
                        <ul class="app-nav-list">
                            <tal:block tal:repeat="filter view/filter_options">
                                <li tal:define="filter_value filter/value"
                                         tal:attributes="class python:view.computed_class(filter_value)">
                                    <a class="app-nav-list-link"
                                             tal:attributes="href string:${context/absolute_url}?content_filter=1&amp;courseType=${filter/value}"
                                             tal:content="filter/title">Filter option</a>
                                </li>
                            </tal:block>
                        </ul>
                    </div>
                    <div class="app-card__footer">
                        <a class="btn btn-danger btn-sm"
                                 tal:attributes="href string:${context/absolute_url}">
                            &times; <span i18n:translate="">Back to legacy listing</span></a>
                    </div>
                </div>
                <div class="app-card app-card--nav app-card--lectures"
                         tal:condition="view/has_archives">
                    <div class="app-card__header">
                        <div class="app-card__heading" i18n:translate="">Archive</div>
                    </div>
                    <div class="app-card__main app-card__main--bordered">
                        <ul class="app-nav-list">
                            <tal:block tal:repeat="folder view/contained_course_folders">
                                <li class="app-nav-list-item" tal:define="filter_active python:view.is_current_view_context(folder)">
                                    <a class="app-nav-list-link"
                                             tal:attributes="href folder/getURL"
                                             tal:content="folder/Title">Archive folder</a>
                                </li>
                            </tal:block>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="app-section__main">
                <div class="app-page__header">
                    <h1 i18n:translate="">Lectures</h1>
                    <p class="app-page__abstract">${context/Title}</p>
                </div>
                <div class="app-page__body">
                    <form>
                        <div class="form-group field"
                                 tal:define="req_value request/title | nothing">
                            <input class="form-control" id="degree"
                                   type="text" name="degree"
                                   placeholder="Enter degree title"
                                     tal:attributes="value req_value" hidden>
                            <select class="form-control form__control form-field__select form__control--courses js-module-selector"
                                    id="selector__degree-courses"
                                    name="degree-course"
                                    data-target-list="#selector__course-modules"
                                    data-selector="master"
                                     tal:define="options view/degree_courses">
                                <option disabled selected value i18n:translate=""> -- select an option -- </option>
                                <tal:block tal:repeat="value options">
                                    <option tal:define="token python:options[value]"
                                             tal:attributes="value string:${token};">
                                            ${value}
                                    </option>
                                </tal:block>
                            </select>
                        </div> <!-- /title field -->
                    </form>
                    <section class="app-page__section app-list"
                        tal:define="Batch python:modules['Products.CMFPlone'].Batch;
                                    b_size python:int(request.get('b_size', 20));
                                    b_start python:int(request.get('b_start', 0));
                                    results view/lectures;
                                    batch python:Batch(results, b_size, b_start);">
                        <article class="app-list__item" tal:repeat="item batch">
                            <div class="app-list__item-details" tal:define="item_uuid item/UID">
                                <span tal:replace="structure python:view.rendered_course_card(item_uuid)" />
                            </div>
                        </article>
                    </section>
                </div>

            </div>
        </div>

    </metal:content-core>
</metal:main>
</body>
</html>